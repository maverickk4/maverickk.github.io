<html>
  <head>
    <link rel="stylesheet" type="text/css" href="wpmSpeech.css">
  </head>
  <body>
    <div class="container">
      <h2>Speed of Speech Calculator</h2>
      <textarea id="speech" placeholder="Enter your speech here, when you are ready to see how fast (on average) that you are speaking, press start!"></textarea>
      <input type="button" value="Start Timer" onclick="startTimer()">
      <input type="button" value="Finish" onclick="stopTimer()">
      <p id="output" class="output"></p>
    </div>
    <script>
      let startTime;
      let inter;
      let speech = document.getElementById("speech");
      let output = document.getElementById("output");
      
      function startTimer() {
        let words = speech.value.split(" ");
        let wordCount = words.length;
        setTimeout(function() {
          alert("Are you ready? Take a deep breath, and close this prompt to start the timer. Start whenever you see the timer start!");
          setTimeout(function() {
            startTime = new Date().getTime();
            interval = setInterval(function() {
              let elapsedTime = (new Date().getTime() - startTime) / 1000;
              let wpm = Math.round(wordCount / (elapsedTime / 60));
              output.innerHTML = `You spoke for ${elapsedTime.toFixed(2)} seconds at ${wpm} words per minute! Your speech is ${wordCount} words long.`;
            });
          }, 2000);
        }, 100);
      }
      function stopTimer() {
        clearInterval(interval);
      }
    </script>
  </body>
</html>
